$$WP.Utilities=$$WP.Utilities||{};var $$WPUtil=$$WP.Utilities;$$WPUtil._lightboxFadeDelay=200;$$WPUtil.SetupRadioLabels=function(){var c="id",b='label[for="',a='"]';$afe.select('input[type="radio"]').change(function(){var d="selected";$.each($afe.select('input[type="radio"][name="'+$afe.jq(this).safeAttr("name")+a),function(f,e){$afe.select(b+$afe.jq(e).safeAttr(c)+a).removeClass(d)});$afe.select(b+$afe.jq(this).safeAttr(c)+a).addClass(d)}).focus(function(){$afe.select(b+$afe.jq(this).safeAttr(c)+a).addClass("focused")}).blur(function(){$afe.select(b+$afe.jq(this).safeAttr(c)+a).removeClass("focused")});$afe.select(".radiolabel").click(function(){})};$$WPUtil.SetupRadioLabelsInContainer=function(d,e){var c="id",b='label[for="',a='"]';if(d===null)return;d.find('input[type="radio"]').change(function(){var f="selected";$.each(d.find('input[type="radio"][name="'+$afe.jq(this).safeAttr("name")+a),function(g,e){d.find(b+$afe.jq(e).safeAttr(c)+a).removeClass(f)});d.find(b+$afe.jq(this).safeAttr(c)+a).addClass(f);e!==null&&e(this)}).focus(function(){d.find(b+$afe.jq(this).safeAttr(c)+a).addClass("focused")}).blur(function(){d.find(b+$afe.jq(this).safeAttr(c)+a).removeClass("focused")});d.find(".radiolabel").click(function(){})};$$WPUtil.SetDropdownContents=function(a,c,e,f){var d="disabled",b;if($$WPUtil.IsNullOrEmpty(a)||$$WPUtil.IsNullOrEmpty(c))return;if(f)c=$.parseJSON(c);b=[];$.each(c,function(a,c){b.push('<option value="'+a+'">'+c+"</option>")});a.empty();dangerou$.setHtml(a,b.join());if(e&&b.length<2)a.prop(d,true);else a.prop(d,false)};$$WPUtil.SmoothScrollToElement=function(a,c,d,b){$$WPUtil.SmoothScrollToElementWithOffset(a,c,0,d,b)};$$WPUtil.SmoothScrollToElementWithOffset=function(d,h,b,c,f){var g,e,a;if($$WPUtil.IsNullOrEmpty(h))throw"Cannot scroll to an empty target.";if($$WPUtil.IsNullOrEmpty(d))throw"Cannot scroll nothingness.";if($$WPUtil.IsNullOrEmpty(c))c=400;if($$WPUtil.IsNullOrEmpty(b))b=0;g=$afe.jq(h);e=g.offset().top;a=$afe.jq(d);a.animate({scrollTop:e-b},c,function(){var b="force_redraw";f&&f();a.addClass(b);window.setTimeout(function(){a.removeClass(b)},1)})};$$WPUtil.IsNullOrEmpty=function(a){return typeof a==="undefined"||a===null||a===""};$$WPUtil.AddThrottledListener=function(e,f,b,d,a){var c;if($$WPUtil.IsNullOrEmpty(e))throw"Element to bind cannot be empty";if($$WPUtil.IsNullOrEmpty(f))throw"You must specificy at least one event to throttle";if(!$.isNumeric(d))d=100;if($$WPUtil.IsNullOrEmpty(a)&&$$WPUtil.IsNullOrEmpty(b))b="change";if(!$.isFunction(a))a=null;c=false;$afe.jq(e).bind(f,function(f){if(c)return;c=true;window.setTimeout(function(){!$$WPUtil.IsNullOrEmpty(b)&&$afe.jq(e).trigger(b);!$$WPUtil.IsNullOrEmpty(a)&&a(f);c=false},d)})};$$WPUtil.AddToggleListener=function(j,b,c,e,d,g,f,k,a,i){var h;if($$WPUtil.IsNullOrEmpty(b))throw"Toggle control ID is required.";if($$WPUtil.IsNullOrEmpty(c))c="click";if(a!==true&&a!==false)a=true;$$WPUtil.GetUniqueJQueryById(j,b).bind(c,function(o){var c="data-toggled",n,l,m;n=$$WPUtil.GetUniqueJQueryById(j,b).safeAttr("data-toggle-for");if(!$$WPUtil.IsNullOrEmpty(n)){l=$afe.select("#"+n);m=l.safeAttr(c);h=$afe.jq(k);$.each(h,function(h,b){var a;$afe.select('[data-toggle-for="'+$afe.jq(this).safeAttr("id")+'"]').removeClass(e).addClass(d);a=$afe.jq(b);a.safeAttr(c,"false");a.removeClass(g).addClass(f)});$$WPUtil.SetElementToggled(l,$afe.jq(this),m!=="true",g,f,e,d);$.isFunction(i)&&i(m==="true",o)}return!a})};$$WPUtil.SetElementToggled=function(j,i,h,f,e,d,c){var g="data-toggled",a,b;b=$afe.jq(j);if(!$$WPUtil.IsNullOrEmpty(i))a=$afe.jq(i);else a=$afe.select('[data-toggle-for="'+b.safeAttr("id")+'"]');if(h==="true"||h===true){b.safeAttr(g,"true");b.removeClass(e).addClass(f);a.length>0&&a.removeClass(c).addClass(d)}else{b.safeAttr(g,"false");b.removeClass(f).addClass(e);a.length>0&&a.removeClass(d).addClass(c)}};$$WPUtil.ElementHasXOverflow=function(a){return a.offsetWidth<a.scrollWidth};$$WPUtil.ElementHasYOverflow=function(d){var a=$afe.select("html").height(),b=d.offsetHeight,c=d.scrollHeight;return a>b?b<c:a===b&&a===c?$afe.jq(window).height()<a:void 0};$$WPUtil.IsElementInView=function(c){var a,d,b;if(isDataTile()){a=parent;b=parent.document.getElementById(window.name).offsetTop}else{a=window;b=0}d=$afe.jq(a);return c.offset().top>=a.pageYOffset&&c.offset().top+c.height()+b<=a.pageYOffset+d.height()};$$WPUtil.ElementHasScrolledToBottom=function(c,b){var g=$afe.jq(c),e=$afe.select("html").height(),f=c.offsetHeight,d=c.scrollHeight,a;if(!$.isNumeric(b))b=.8;a=g;if(e===f&&e===d)a=$afe.jq(window);return a.scrollTop()+a.innerHeight()>=d*b};$$WPUtil.GUIDPrefix=function(a){return a?a+"_":""};$$WPUtil.GetUniqueJQueryById=function(a,b){return $afe.select("#"+$$WPUtil.GUIDPrefix(a)+b)};$$WPUtil.GetStringResource=function(e,d,c){var b=null,a="";if(d){b=$$WPUtil.GetUniqueJQueryById(e,"resources").find('div[data-rsrc-id="'+d+'"]');a=b.safeAttr("data-rsrc-val");if($$WPUtil.IsNullOrEmpty(a))a=b.html();if(!$$WPUtil.IsNullOrEmpty(c))a=$$WPUtil.ReplaceStringMnemonics(a,c)}return a||""};$$WPUtil.ReplaceStringMnemonics=function(a,b){var c;if($$WPUtil.IsNullOrEmpty(a))return null;!$$WPUtil.IsNullOrEmpty(b)&&$.each(b,function(b,d){c=new RegExp("@MYCHART@"+b+"@","gi");a=a.replace(c,d)});return a};$$WPUtil.PopulateComplexTemplate=function(h,f,i,g,j,c){var a,d,e,b;if($$WPUtil.IsNullOrEmpty(f))throw"You must supply a template ID";if($$WPUtil.IsNullOrEmpty(c))c=0;if($$WPUtil.IsNullOrEmpty(g))g={};b=(h?h+"_":"")+f+"_"+c;a=$$WPUtil.GetUniqueJQueryById(h,f).clone();if(a.safeAttr("data-template-children-only")==="true")a=a.children();else if(a.safeAttr("data-template-no-id")==="true")a.safeAttr("id","");else a.safeAttr("id",b);b=b+"_";d=$$WPUtil.RecurseComplexTemplate(a,g,j,b);if(!$$WPUtil.IsNullOrEmpty(i)){e=$afe.jq(i);e.empty();d.safeAppendTo(e)}return d};$$WPUtil.RecurseComplexTemplate=function(a,b,d,f,h,c){var i,g,e;$.each(a,function(A,e){var n="data-template-type",m="data-template-source",l="data-template-group-source",g="data-template-group",r,s,p,v,q,j,u,w,i,y,x,t,k,o,z;e=$afe.jq(e);a=a;r=e.safeAttr(g);s=e.safeAttr(l);i=e.safeAttr(m);t=e.safeAttr("data-template-id");q=j=u=false;z=(e.safeAttr(n)||"").split(" ");$.each(z,function(c,b){var a=true;switch(b){case"collection":q=a;break;case"object":j=a;break;case"value":u=a;break;case"nullable":w=a;break;case"fill":x=a}});p=!$$WPUtil.IsNullOrEmpty(r)&&!$$WPUtil.IsNullOrEmpty(s);v=!$$WPUtil.IsNullOrEmpty(r)&&q;if((j||u)&&w&&$$WPUtil.IsNullOrEmpty(b[i])||x)a=a.not(e.empty().remove());else if((q||j||p)&&!v){if(p){e=e.parent().children('[data-template-group="'+r+'"]');i=s}if($$WPUtil.IsNullOrEmpty(i))o=b;else o=b[i];if(j)o=[o];if(!j&&!$$WPUtil.IsNullOrEmpty(t))k=0;$.each(o,function(j,c){var b,h;if($.isFunction(d))c=d(i,j,c);if(!$$WPUtil.IsNullOrEmpty(c)){b=e.clone();if(p){b.removeAttr(g);b.removeAttr(l)}else{b.removeAttr(n);b.removeAttr(m)}b.safeInsertBefore(e.get(0));h=$$WPUtil.RecurseComplexTemplate(b,c,d,f,t,k);if($.isNumeric(k))k=k+1;b.safeReplaceWith(h);a=a.add(h)}});a=a.not(e.empty().remove())}else if(!$$WPUtil.IsNullOrEmpty(e.safeAttr(g)))return;else if(e.children().length>0){y=$$WPUtil.RecurseComplexTemplate(e.children(),b,d,f,h,c);e.children().remove();y.safeAppendTo(e);a=a.not(e).add(e)}});i=$$WPUtil.SerializeNodes(a);if(typeof b==="string")b={"#Value":b};e=$.isNumeric(c);b["#ID"]=f+(h||"")+(h&&e?"_"+c:"");b["#NUM"]=e?c:"";g=dangerou$.parseHtml($$WPUtil.ReplaceTemplateMnemonics(i,b));$.each(g,function(h,g){var e="data-href-url",d="data-headers",c="data-src-url",b,f,a=$afe.jq(g);b=a.safeAttr(c);if(!$$WPUtil.IsNullOrEmpty(b)){a.safeAttr("src",b);a.removeAttr(c)}f=a.safeAttr(d);if(!$$WPUtil.IsNullOrEmpty(f)){a.safeAttr("headers",f);a.removeAttr(d)}b=a.safeAttr(e);if(!$$WPUtil.IsNullOrEmpty(b)){a.safeAttr("href",b);a.removeAttr(e)}});return g};$$WPUtil.SerializeNodes=function(c){var b,a="";if(typeof XMLSerializer==="function"){b=new XMLSerializer;$.each(c,function(d,c){a=a+(c.outerHTML||b.serializeToString(c))})}else $.each(c,function(c,b){a=a+(b.outerHTML||b.xml)});return a};$$WPUtil.ReplaceTemplateMnemonics=function(a,c){var b;if($$WPUtil.IsNullOrEmpty(a))return null;!$$WPUtil.IsNullOrEmpty(c)&&$.each(c,function(d,c){b=new RegExp("__"+d+"__","gi");if(typeof c==="string")c=HTMLEncode(c);a=a.replace(b,c)});return a};$$WPUtil.CenterContainerOnPage=function(d,c){var b,e,a=0;e=$afe.jq(window).height();b=$afe.jq(d);c&&$$WPUtil.setScrollTop(0);a=$$WPUtil.getScrollTop()+($afe.jq(window).height()-b.height())/2;if(a<0)a=0;b.css({top:a+"px"})};$$WP.Utilities.isAbsoluteURL=function(b){var a=new RegExp("^(?:[a-z]+:)?//","i");return a.test(b)};$$WPUtil.ShowUrlInLightbox=function(b,f,a,e,d){var c;c=b.url||b;if(!c)return;$.ajax($.extend({url:c,type:"GET",dataType:"html",success:function ShowUrlInLightbox$success(g){var c=".ajaxspinner",f,b;$$WPUtil.ShowLightboxOverlay(null,e,d);b=$afe.select("#lightbox");dangerou$.setHtml(b,"");f=$afe.select(c).length>0;dangerou$.setHtml(b,g);f&&b.find(c).remove();$afe.select("body").addClass("showLightBox");b.removeClass("hidden").show(function ShowUrlInLightbox$show(){$$WPUtil.CenterContainerOnPage(b)}).promise().done(function ShowUrlInLightbox$done(){a&&typeof a==="function"&&a()})}},f||b.settings))};$$WPUtil.ShowContainerAsLightbox=function(b,d,c){var a,e={container:b,hideLightboxCallback:c};$$WPUtil.ShowLightboxOverlay(b,d,c);a=$afe.jq(b);a.show($$WPUtil._lightboxFadeDelay,function(){a.find(".slider").trigger("matchCardHeights");$$WPUtil.CenterContainerOnPage(b)});a.on("keydown",function(b){$$WPUtil.LightboxKeyDownHandler(b,a,$$WPUtil.LightboxEscKeyHandler,null,null,e)})};$$WPUtil.LightboxEscKeyHandler=function(d,a){var c=a.container,b=a.hideLightboxCallback;$$WPUtil.HideLightbox(c,b);d.preventDefault()};$$WPUtil.ShowLightboxOverlay=function(d,a,c){var b=$afe.select("#lightbox_overlay");b.off("click");b.on({click:function(){$$WPUtil.HideLightbox(d,c)}});b.show($$WPUtil._lightboxFadeDelay).promise().done(function(){a&&typeof a==="function"&&a()})};$$WPUtil.LightboxKeyDownHandler=function(a,j,i,g,e,f){var h="function",b,c,d;b=j.find("a[href]:not([tabindex='-1']), area[href]:not([tabindex='-1']), input:not([tabindex='-1']), select:not([tabindex='-1']), textarea:not([tabindex='-1']), button:not([tabindex='-1']), [tabindex]:not([tabindex='-1'])");c=b[0];d=b[b.length-1];switch(a.which){case 9:if(a.shiftKey){if(document.activeElement===c){$afe.jq(d).focus();a.preventDefault()}}else if(document.activeElement===d){$afe.jq(c).focus();a.preventDefault()}break;case 27:i!==null&&typeof i===h&&i(a,f);break;case 38:g!==null&&typeof g===h&&g(a,f);break;case 40:e!==null&&typeof e===h&&e(a,f)}};$$WPUtil.HideLightbox=function Epic$PatientAccess$Utilities$HideLightbox(b,a){if($$WPUtil.PreventHideLightbox!==true){!$$WPUtil.IsNullOrEmpty(b)&&$afe.jq(b).hide($$WPUtil._lightboxFadeDelay);$afe.select(".lb_content").hide($$WPUtil._lightboxFadeDelay);$afe.select("#lightbox_overlay").hide($$WPUtil._lightboxFadeDelay);$afe.select("body").removeClass("showLightBox");hideLightbox();a&&typeof a==="function"&&a()}};$$WPUtil.AjaxifyForm=function Epic$PatientAccess$Utilities$AjaxifyForm(f,a,e,d,c){var b={};if(!a)return;b.url=$afe.jq(a).safeAttr("action");b.type=$afe.jq(a).safeAttr("method");b.sendFormData=true;a.unbind("submit").bind("submit",$$WPUtil.SubmitAjaxifiedForm(b,f,a,e,d,c))};$$WPUtil.SubmitAjaxifiedForm=function(b,c,a,f,e,d){return function(){var g,j,i,h;g=$$WPUtil.AjaxifyFormSubmitHandler(c,a,f,e,d);j=b.url;i=b.type;h=b.sendFormData?$afe.jq(a).serialize():{};if(!$$WPUtil.ValidateForm(c,a))return false;$.ajax({url:j,type:i,data:h,context:$afe.jq(a),datatype:"json",error:$$WPUtil.DisplayAjaxError,statusCode:{404:function(){}},success:g});return false}};$$WPUtil.AjaxifyFormSubmitHandler=function(e,d,b,a,c){return function(f){if(f.action==="syncchart"){$$WPUtil._invokeErrorCallback(b,f.info);return}if(f.action==="endworkflow"){$$WPUtil._invokeErrorCallback(b,f.errors);return}if(f.action==="showerrors"){$$WPUtil.WriteErrorsToForm(e,$afe.jq(d),f.errors,f.Mnemonics);$$WPUtil._invokeErrorCallback(b,f.errors);return}$$WPUtil.RunCallbackForType(c);if(a&&typeof a==="function"){var g=true;try{g=a(f)}catch(h){}if(!g)return}if(f.action==="lightbox"&&f.url.length>0){$$WPUtil.ShowUrlInLightbox(f);return}if(f.action==="redirect"){window.location.assign(f.url||"/");return}}};$$WPUtil._invokeErrorCallback=function Epic$PatientAccess$Utilities$_invokeErrorCallback(a,b){if(a&&typeof a==="function")try{a(b)}catch(c){$$WPUtil.ShowUrlInLightbox("Error")}};$$WPUtil.CallbackTypeEnum={Authenticate:"Authenticate"};$$WPUtil.RegisterCallbackForType=function Epic$PatientAccess$Utilities$SetCallbackForType(c,a){var b=$$WPUtil.CallbackTypeEnum[c];if(!$$WP.CallbacksForType)$$WP.CallbacksForType={};if(!$$WPUtil.IsNullOrEmpty(b)&&a&&typeof a==="function")$$WP.CallbacksForType[b]=a};$$WPUtil.RunCallbackForType=function Epic$PatientAccess$Utilities$RunCallbackForType(c){var a,b=$$WPUtil.CallbackTypeEnum[c];if(!$$WPUtil.IsNullOrEmpty(b)){a=$$WP.CallbacksForType[b];a&&typeof a==="function"&&a()}};$$WPUtil.DisplayAjaxError=function Epic$PatientAccess$Utilities$DisplayAjaxError(c,a){alert("An error occurred while processing the request: "+a)};$$WPUtil.ValidateForm=function Epic$PatientAccess$Utilities$ValidateForm(f,a){var c="field-validation-valid",b="field-validation-error",e={},d=false;a.find("[data-form-valmsg-for="+a.safeAttr("id")+"]").removeClass(b).addClass(c).empty();a.find("span[data-valmsg-for]").removeClass(b).addClass(c).empty();a.find("input").each(function(){var a=this;if($afe.jq(a).safeAttr("data-val")==="true"){var b=$afe.jq(a).safeAttr("data-val-required");if(b&&a.value===""){e[$afe.jq(a).safeAttr("name")]=b;d=true}else $afe.jq(a).removeClass("input-validation-error")}});if(d){$$WPUtil.WriteErrorsToForm(f,a,e);return false}return true};$$WPUtil.WriteErrorsToForm=function Epic$PatientAccess$Utilities$WriteErrorsToForm(l,c,a,k){var i="validation-summary-errors",h="validation-summary-valid",g='div[data-valmsg-summary="true"]',e="field-validation-error",d="field-validation-valid",f,b,j={};a=$$WPUtil.MapValidationCodesFromServer(l,a,k);c.find("input").each(function(){var f='span[data-valmsg-for="',b="input-validation-error",g=this,h=$afe.jq(g).safeAttr("name"),k=$afe.jq(g).safeAttr("id"),i=a[h];if(j[h]===1)return;if(i){$afe.jq(g).addClass(b);dangerou$.setHtml(c.find(f+k+'"]').removeClass(d).addClass(e),i);delete a[h];j[h]=1}else{$afe.jq(g).removeClass(b);c.find(f+k+'"]').removeClass(e).addClass(d).empty()}});b=a.formlevelmsg;if(b){dangerou$.setHtml(c.find(g).removeClass(h).addClass(i).find("ul").safeAppend("li"),b);delete a.formlevelmsg}else c.find(g).removeClass(i).addClass(h).find("ul").empty();for(f in a)if(a.hasOwnProperty(f)){b=a[f];b&&dangerou$.setHtml(c.find('span[data-valmsg-for*="'+f+'"]').removeClass(d).addClass(e),b)}};$$WPUtil.MapValidationCodesFromServer=function Epic$PatientAccess$Utilities$MapValidationCodesFromServer(d,f,c){var a,e,b;e=$$WPUtil.GetUniqueJQueryById(d,"resources");a={};$.each(f,function(e,g){var f;if(!$$WPUtil.IsNullOrEmpty(c))f=c[e];b=$$WPUtil.GetStringResource(d,g,f);if(b)a[e]=b;else a[e]=g});return a};$$WPUtil.LogAction=function(d,b,a){var c=$afe.select("#logActionUrl").html();$.ajax(c,{type:"POST",action:b,mnemonicsString:JSON.stringify(a),suppressEpicDefaultAjaxErrorHandler:true})};$$WPUtil.getScrollNode=function(){var a;if(isDataTile())a=parent.document;else a=document;return a.scrollingElement||a.documentElement};$$WPUtil.ScrollableBody=function(){var a;a=$$WPUtil.getScrollNode();return $afe.jq(a)};$$WPUtil.getScrollTop=function(){var a;a=$$WPUtil.getScrollNode();return a.scrollTop};$$WPUtil.setScrollTop=function(a){var b;if($$WPUtil.IsNullOrEmpty(a))a=0;b=$$WPUtil.getScrollNode();b.scrollTop=a};$$WPUtil.getScrollLeft=function(){var a;a=$$WPUtil.getScrollNode();return a.scrollLeft};$$WPUtil.setScrollLeft=function(a){var b;if($$WPUtil.IsNullOrEmpty(a))a=0;b=$$WPUtil.getScrollNode();b.scrollLeft=a};$$WPUtil.ActivateHelp=function(a){$afe.select('a[data-lightbox-guid="'+a+'"]').each(function(){$afe.jq(this).unbind("click").bind("click",function(){$$WPUtil.ShowContainerAsLightbox($$WPUtil.GetUniqueJQueryById(a,$afe.jq(this).safeAttr("data-lightbox-id")))})})};$$WPUtil.SetupCustomTabbingForFields=function WPControl$LoginController$_SetupTabbing(b){var c=null,d,e,f,a;f=b[b.length];for(a=0;a<b.length;a++){d=a>0?b[a-1]:c;e=a<b.length-1?b[a+1]:c;b[a].bind("keydown",{$tabFrom:d,$tabTo:e},$$WPUtil._CustomTabbingForField);d!==c&&e!==c&&b[a].safeAttr("tabindex",-1)}};$$WPUtil._CustomTabbingForField=function WPControl$LoginController$_SetupTabbing(a){var b;if(a.keyCode===9){b=a.shiftKey?a.data.$tabFrom:a.data.$tabTo;if(b!==null){b.focus();a.stopPropagation();a.preventDefault()}}};$$WPUtil.quickPopup=function(b,a){if(!$.isArray(b))a=$$WPUtil.mergeObjects({Components:b},a,true);else a.Components=b;var c=new $$WPContain.Popup(a);c.show(true);return c};$$WPUtil.SafeToRedirectOverrideSettings={};$$WPUtil.SafeToRedirect=function WPUtil$SafeToRedirect(b,d){var c,a;if(WP.Events.showBeforeUnloadMessage()){if(WP.Events.SafeToUnloadWarningDisplayed!==true){a={callback:b};$.extend(a,$$WPUtil.SafeToRedirectOverrideSettings);c=new $$WPComp.SafeToRedirectComponent(a);return $$WPUtil.quickPopup(c,{positioningFunction:d})}}else b(true)};$$WPUtil.TryRedirect=function WPUtil$TryRedirect(b,i,f,c){var a=true,h=function WPUtil$TryRedirect(l){if(!l)return;var d,j,o,e=$$WPUtil.parseQueryString(b).mode,n=$$WPUtil.queryString("mode"),m=$$WPUtil.TryRedirect._mustPickOrganizationModes,k=$$WPUtil.TryRedirect._mustPickOrganizationRoutes,i=function(a,e,c){var b="netredirect",d,f;if($$WPUtil.IsH2GActivity(a)){if(a.toLowerCase().indexOf(makeLink("").toLowerCase())===-1)a=makeLink(a);window.location=a;return}if(c&&c!=="1"&&!c.IsLocal){f=a.toLowerCase().indexOf(makeLink("").toLowerCase());if(f>-1)d=a.substr(f+makeLink("").length);else d=a;if(typeof c==="string")$$WP.CommunityUtilities.getOrganization(c,function(c,d,a){$$WP.CommunityUtilities.openDeepLink(b,a,{targetUrl:c},d?$$WP.CommunityUtilities.openDeepLinkType.InNewTab:$$WP.CommunityUtilities.openDeepLinkType.InPopup)},[d,e]);else $$WP.CommunityUtilities.openDeepLink(b,c,{targetUrl:d},e?$$WP.CommunityUtilities.openDeepLinkType.InNewTab:$$WP.CommunityUtilities.openDeepLinkType.InPopup)}else if(e)openWindow(a);else window.location=a};if(!f){var g=$$WPUtil.parseQueryString(b).local,h=null;if(g!==undefined){if(g==="1")d=false;else if(g==="0")d=a}else if(m.indexOf(e)>-1)d=a;else $.each(k,function(f,c){if(b.indexOf(f)>-1){d=a;e=c;h=makeLink("inside.asp?mode="+e);return}});if(d){if(["msgoptions","medrefill","custsvc","refrequest"].indexOf(e)!==-1)j=$$WP.Strings.get("PickOrganization","Messaging.Review");$$WP.CommunityUtilities.pickOrganization(function(b,a){if(a==="close")return;if(h)b=h;i(b,c,a)},j,[b],e);return}else f="1"}i(b,c,f)},d,e,g;d=window.location.protocol+"//"+window.location.hostname;d=d.toLowerCase();e=b.toLowerCase();g=e.substring(0,4);c=c||e.indexOf(d)<0&&g==="http";if(c)h(a);else $$WPUtil.SafeToRedirect(h,i)};$$WPUtil.TryRedirect._mustPickOrganizationModes=["msgoptions","refrequest"];$$WPUtil.TryRedirect._mustPickOrganizationRoutes={"/AskQuestion":"msgoptions","/RequestReferral":"refrequest"};$$WPUtil.DidNotRedirect=function WPUtil$DidNotRedirect(){$$WPComp.SafeToRedirectComponent.canceledRedirect()};$$WPUtil.setActivity=function WPUtil$setActivity(){if(checkActivity&&checkActivity.sessionTimeout)if($$WPUtil.setActivity.msSinceLastActivity()>=checkActivity.sessionTimeout){document.write("");window.location=makeLink("default.asp");return}$$WPUtil.setActivity.__lastActivity=new Date;!$$WPUtil.IsNullOrEmpty($$WP.CommunityUtilities.getParentJumpGUID())&&parent.postMessage(JSON.stringify({message:"setActivity",externalGUID:$$WP.CommunityUtilities.getParentJumpGUID()}),$$WP.CommunityUtilities.getParentDomain())};$$WPUtil.checkActivity=function(){checkActivity()};$$WPUtil.setActivity.msSinceLastActivity=function WPUtil$activity$timePassed(){return new Date-$$WPUtil.setActivity.__lastActivity};$$WPUtil.copyObject=function Utilities$CopyObject(a){if(!a)return null;if(!$.isArray(a))return $$WPUtil.mergeObjects(a,{},false,true);var c,b,d;c=[];d=a.length;for(b=0;b<d;b++)c.push(a[b]);return c};$$WPUtil.mergeObjects=function Utilities$mergeObjects(d,a,g,e){($.isArray(d)||$.isArray(a))&&console.error("mergeObjects cannot be used on arrays");a=a||{};if(g)a=$$WPUtil.copyObject(a);if(!d)return a;var b,c,f;f=function(a){return a&&typeof a==="object"&&!(a instanceof jQuery)&&!$$WPComp.isComponent(a)&&!$.isArray(a)&&!(a instanceof Handlebars.SafeString)};for(c in d){b=d[c];if(typeof b!=="undefined")if(f(b))a[c]=$$WPUtil.mergeObjects(d[c],a[c],false,e);else if(e||!a[c]){if($.isArray(b))b=$$WPUtil.copyObject(b);a[c]=b}}return a};$$WP.Utilities.guaranteeExistence=function Utilities$GuaranteeExistence(a,e,d){a=a||$$WP;for(var c=e.split("."),f=c.length-1,b=0;b<f;b++){if(!a.hasOwnProperty(c[b]))a[c[b]]={};a=a[c[b]]}if(!a.hasOwnProperty(c[b]))a[c[b]]=arguments.length>2?d:{};return a};$$WPUtil.preventEvent=function Utilities$preventEvent(a){a.stopPropagation();a.preventDefault();return false};$$WPUtil.parseQueryString=function Util$parseQS(a){if(a.charAt(a.length-1)==="&")a=a.substring(0,a.length-1);for(var c=a.substr(a.indexOf("?")+1).split("&"),f={},d,e,b=0;b<c.length;b++){d=c[b].indexOf("=");if(d===-1&&b>0)f[e]+="&"+c[b];else{e=c[b].substr(0,d).toLowerCase();f[e]=c[b].substr(d+1)}}return f};$$WPUtil.queryString=function Utilities$queryString(a){if(!$$WPUtil.queryString.parsed)$$WPUtil.queryString.parsed=$$WPUtil.parseQueryString(window.location.search);return $$WPUtil.queryString.parsed[a.toLowerCase()]||""};$$WPUtil.verticalScrollBarWidth=function $$WPUtil$verticalScrollBarWidth(){if(!$$WPUtil.verticalScrollBarWidth._cached){var a,d,c,b;a=$afe.renderTemplate($$WP.Templates.Core.scrollbarwidth);d=a.children(0).get(0);document.body.appendChild(a.get(0));c=d.offsetWidth;a.css("overflow","scroll");b=d.offsetWidth;if(b===c)b=a.get(0).clientWidth;a.remove();$$WPUtil.verticalScrollBarWidth._cached=c-b}return $$WPUtil.verticalScrollBarWidth._cached};$$WPUtil.preventAndroidLongPress=function(b,a){if(navigator.userAgent.indexOf("Android")>=0){if(b.length===1&&!a)a=b;if(a)a.on("contextmenu",b.selector,function(a){a.preventDefault()})}};$$WPUtil.isBrowserCapableOf=function(c,b){var a;switch(c){case"flexbox":return document.body.style.flex!==undefined;case"input":a=document.createElement("input");$afe.jq(a).safeAttr("type",b.type);return a.type===b.type;case"touchEvents":return"ontouchstart"in window||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0;case"canvas":return!!window.HTMLCanvasElement;case"ActiveX":return!!window.ActiveXObject;case"Intl":return typeof Intl==="object"&&"DateTimeFormat"in Intl&&"NumberFormat"in Intl}};$$WPUtil.isValidBrowser=function(){return $$WPUtil.isBrowserCapableOf("canvas")&&!$$WPUtil.isBrowserCapableOf("ActiveX")&&$$WPUtil.isBrowserCapableOf("Intl")};$$WPUtil.addUrlParameter=function(a,c,b){if(a.indexOf("?")===-1)a+="?";else if(a[a.length-1]!=="&")a+="&";return a+c+"="+b};$$WPUtil.isNaN=function(a){return isNaN(a)||!a&&a!==0};$$WPUtil.confirmFormSubmission=function(b,d,c,a,f,g,e){if(c)$$WPUtil.quickMessageBoxByEnum(d,c,$$WPUtil.confirmFormSubmission.submitForm,[b,a]);else $$WPUtil.quickMessageBox(d,g,f,$$WPUtil.confirmFormSubmission.submitForm,[b,a],"",e);return false};$$WPUtil.confirmFormSubmission.submitForm=function(a,b,c){var d;if(typeof b==="function")if(b(a,c)===false)return;if(c===$$WP.Components.TOOLBARIDENTIFIER+"continue"){d=a.onclick;a.onclick=null;a.click();a.onclick=d}};$$WPUtil.quickMessageBoxByEnum=function(j,f,h,g,i){var c="Core.Utilities",e="ContinueGobackTitle",d=$$WPUtil.quickMessageBoxByEnum.typeEnum,b,a;f=f||$$WPUtil.quickMessageBoxByEnum.typeEnum.ContinueGoback;switch(f){case d.ContinueGoback:b=$$WP.Strings.get(e,c);a=$$WPUtil.createContinueGoBackButtons();break;case d.DeleteGoback:b=$$WP.Strings.get("DeleteGobackTitle",c);a=$$WPUtil.createDeleteGoBackButtons();break;case d.YesNo:b=$$WP.Strings.get("YesNoTitle",c);a=$$WPUtil.createYesNoButtons();break;case d.Ok:b=$$WP.Strings.get("AlertTitle",c);a=$$WPUtil.createOkButton();break;case d.RemoveGoback:b=$$WP.Strings.get(e,c);a=$$WPUtil.createRemoveGoBackButtons();break;case d.RestoreGoback:b=$$WP.Strings.get(e,c);a=$$WPUtil.createRestoreGoBackButtons();break;default:return}return $$WPUtil.quickMessageBox(j,b,a,h,g,i)};$$WPUtil.quickMessageBoxByEnum.typeEnum={ContinueGoback:1,DeleteGoback:2,YesNo:3,Ok:4,RemoveGoback:5,RestoreGoback:6};$$WPUtil.createContinueGoBackButtons=function(){var a="Core.Utilities",b=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Continue",a),null,"completeworkflow","continue"),c=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback",a),null,"previousstep","cancel");return[b,c]};$$WPUtil.createDeleteGoBackButtons=function(){var a="Core.Utilities",b=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Delete",a),null,"inlinedelete","continue"),c=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback",a),null,"previousstep","cancel");return[b,c]};$$WPUtil.createYesNoButtons=function(){var a="Core.Utilities",b=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Yes",a),null,"completeworkflow","continue"),c=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("No",a),null,"previousstep","cancel");return[b,c]};$$WPUtil.createOkButton=function(){var a=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("MessageBoxOK","global"),null,"otherbutton","continue");return[a]};$$WPUtil.createRemoveGoBackButtons=function(){var a="Core.Utilities",c=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Remove",a),null,"inlinedelete","continue"),b=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback",a),null,"previousstep","cancel");return[c,b]};$$WPUtil.createRestoreGoBackButtons=function(){var a="Core.Utilities",b=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Restore",a),null,"inlinesave","continue"),c=new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback",a),null,"previousstep","cancel");return[b,c]};$$WPUtil.quickMessageBox=function(h,a,c,f,d,g,e){a!==HTMLUnencode(a)&&$$WP.Debug.logError("$$WPUtil.quickMessageBox was probably called with an HTML formatted title. The title should be raw text, not HTML");var i=$$WP.Strings.getNamespace("Global.Confirm"),b;b=new $$WPComp.MessageComponent({TitleText:!a&&a!==""?i.getStringForTemplate("GenericConfirmTitle"):a,Message:h,callback:f,CallbackArgs:d,ToolbarButtons:c});return $$WPUtil.quickPopup(b,{Size:c.length<3?$$WPContain.Popup.SizeEnum.SMALL:$$WPContain.Popup.SizeEnum.MEDIUM,Class:g,HasBackButton:e})};$$WPUtil.generateGUID=function(){$$WPUtil.generateGUID._last=$$WPUtil.generateGUID._last||0;$$WPUtil.generateGUID._last++;return $$WPUtil.generateGUID._last};$$WPUtil.generateGUID._last;$$WPUtil.getDomain=function(a){try{return a.protocol+"//"+a.host}catch(b){return null}};$$WPUtil.canWriteCookies=function(){var a="testCookie";setCookie(a,"testValue",true);var c=getCookie(a,true),b=c!=="";b&&deleteCookie(a,true);return b};$$WPUtil.canWriteCookiesAsync=function(){return new Promise(function(a){if(typeof document.requestStorageAccess==="function"){$$WPUtil.canWriteCookies()&&a(true);document.requestStorageAccess().then(function(){a($$WPUtil.canWriteCookies())}).catch(function(){a(false)})}else a($$WPUtil.canWriteCookies())})};$$WPUtil.cssValueToPixels=function(a){if(a.indexOf("rem")>-1){if(!$$WPUtil.cssValueToPixels.emSize)$$WPUtil.cssValueToPixels.emSize=parseFloat($afe.select("body").css("font-size"));return Math.round(parseFloat(a,10)*$$WPUtil.cssValueToPixels.emSize)}else if(a.indexOf("px")>-1)return parseFloat(a,10);else!isNaN(parseFloat(a,10))&&console.log("CSS value cannot be converted to pixels: "+a)};$$WPUtil.instantiateComponent=function(c,d,b){var a={};a.SupportedComponents=c;a.$parent=$afe.select("#"+d);if(b)a.ComponentProperties=b;return new $$WPContain.HTMLTemplateContainer(a)};$$WPUtil.getPopupParent=function(a){return a.parents("#main, #sidebar, #lightbox, .Popup, .direct_message, .menudetailstable.leftmenu .leftcolumn, .popupOwner")};$$WPUtil.positionElementNear=function(h,e){var o="Popup cannot be fit to screen",s="onBottom",n="onRight",m=null,j=false,r="onRight onLeft onBottom onTop",k,a,c,b,l,f,d,p,i,g,q=400;h.removeClass(r);e.removeClass(r);k=$$WPUtil.getPopupParent(e);a=k.boxModel(j);i=k[0].offsetWidth-k[0].clientWidth;g=0;if(k.safeAttr("id")==="main"||k.safeAttr("id")==="sidebar"){a.height-=$afe.select("#footer").outerHeight(j);a.bottom=a.top+a.height}b=h.boxModel(j);d=m;f=m;if(q<a.width)e.outerWidth(q);else{e.outerWidth(a.width-16);g=a.left+8}c=e.boxModel(j);l={toRight:a.right-b.right-i,toLeft:b.left-a.left,above:b.top-a.top,below:a.bottom-b.bottom};if(l.toRight>c.width){h.addClass(n);e.addClass(n);d=b.right+g}else if(l.above>c.height){h.addClass("onTop");e.addClass("onTop");f=b.top-c.height;p=true}else if(l.toLeft>c.width){h.addClass("onLeft");e.addClass("onLeft");d=b.left-c.width+g}else if(l.below>c.height){h.addClass(s);e.addClass(s);f=b.bottom}if(d!==m)if(b.bottom-c.height>a.top)f=b.bottom-c.height+2;else if(b.top+c.height<a.bottom){f=b.top-2;e.addClass("infoPopupAlignTop")}else{f=b.top+b.height/2-c.height/2;if(f<a.top||f>a.bottom){f=a.top;$$WP.Debug.log(o)}}else if(f!==m)if(b.left+c.width+i<a.right)d=b.left-2+g;else if(b.right-c.width>a.left)d=b.right-c.width+2+g;else{d=b.left+b.width/2-c.width/2+g;if(a.width<c.width+d+i){d=a.left+8;e.outerWidth(a.width-16-i);if(p){c=e.boxModel(j);f=b.top-c.height}}if(d<a.left||d>a.right){d=a.left+8;e.outerWidth(a.width-16-i);if(p){c=e.boxModel(j);f=b.top-c.height}$$WP.Debug.log(o)}}else{$$WP.Debug.log(o);h.addClass(n);f=b.top;d=b.right}return{top:f,left:d}};$$WPUtil.positionElementNearRTL=function(g,e){var m="Popup cannot be fit to screen",p="onBottom",l="onRight",j=null,h=false,o="onRight onLeft onBottom onTop",k,b,c,a,i,f,d,q,n=400;g.removeClass(o);e.removeClass(o);k=e.parents("#main, #sidebar, #lightbox, .Popup, .direct_message, .menudetailstable.leftmenu .leftcolumn, .popupOwner");b=k.boxModel(h);if(k.safeAttr("id")==="main"||k.safeAttr("id")==="sidebar"){b.height-=$afe.select("#footer").outerHeight(h);b.bottom=b.top+b.height}a=g.boxModel(h);i={toRight:b.right-a.right,toLeft:a.left-b.left,above:a.top-b.top,below:b.bottom-a.bottom};d=j;f=j;if(n<b.width)e.outerWidth(n);else e.outerWidth(b.width);c=e.boxModel(h);if(i.toLeft>c.width){g.addClass(l);e.addClass(l);d=a.right}else if(i.below>c.height){g.addClass(p);e.addClass(p);f=a.bottom}else if(i.toRight>c.width){g.addClass("onLeft");e.addClass("onLeft");d=a.left-c.width}else if(i.above>c.height){g.addClass("onTop");e.addClass("onTop");f=a.top-c.height;q=true}if(d!==j)if(a.bottom-c.height>b.top)f=a.bottom-c.height+2;else if(a.top+c.height<b.bottom){f=a.top-2;e.addClass("infoPopupAlignTop")}else{f=a.top+a.height/2-c.height/2;if(f<b.top||f>b.bottom){f=b.top;$$WP.Debug.log(m)}}else if(f!==j)if(a.left+c.width<b.right)d=a.right-c.width+2;else if(a.right-c.width>b.left)d=a.left-2;else if(c.width===b.width){e.outerWidth(b.width-16);d=a.left+a.right-b.right+8}else{d=a.left+a.width/2-c.width/2;if(c.left<b.left){d=a.left+a.right-b.right+8;e.width(b.width-32);if(q){c=e.boxModel(h);f=a.top-c.height}}if(d<a.right-b.right+a.left||d>b.right+a.right+a.left){d=a.left+a.right-b.width-b.left;$$WP.Debug.log(m)}}else{$$WP.Debug.log(m);g.addClass(l);f=a.top;d=a.right}return{top:f,left:d}};$$WPUtil.handlePopupInstructions=function(a,c){var b=undefined;if(a.type==="focus"||a.type==="mouseenter")b=true;else if(a.type==="blur"||a.type==="mouseleave"||a.type==="keydown"&&a.keyCode===27){b=false;a.type==="keydown"&&a.keyCode===27&&a.stopPropagation()}b!==undefined&&$$WPUtil.togglePopupInstructions($afe.jq(a.target),b,c)};$$WPUtil.handlePopupInstructionsKeydown=function(a,b){a.type==="keydown"&&a.keyCode===27&&$afe.select("#main").find(".popupiconcontainer .popupinstructionsicon.showPopup").each(function(){var a=$afe.jq(this);$$WPUtil.togglePopupInstructions(a,false,b)})};$$WPUtil.togglePopupInstructions=function(f,p,j){var e="isblur",i="px",o="data-ispositioned",l="allowOverflow",k="showPopup",h="altnode",d="img",a,n,c,m,b,g;j=j||"Global";if(!f.hasClass("popupiconcontainer"))f=f.parents(".popupiconcontainer").first();if(f.length===0)return;a=f.find(".popupInstructions");c=a.siblings(".popupinstructionsicon");n=a.parents("#main, #sidebar, .Popup, .popupOwner");if(p){m="PopupHelpIconAltFull";if(c.find(d).data(h))m=c.find(d).data(h)+"Full";c.find(d).safeAttr("alt",$$WP.Strings.get(m,j));a.removeClass("hidden isblur");c.addClass(k);n.addClass(l);if(c.safeAttr(o)!=="1"){g=c.offset();if($afe.select("html").safeAttr("dir")=="rtl"){b=$$WPUtil.positionElementNearRTL(c,a);b.top-=g.top;b.left-=g.left;a.css({right:b.left+i,top:b.top+i})}else{b=$$WPUtil.positionElementNear(c,a);b.top-=g.top;b.left-=g.left;a.css({left:b.left+i,top:b.top+i})}a.safeAttr(o,"1")}}else{a.addClass(e);window.setTimeout(function(f,b,a){var c=b.find(d).data(h)||"PopupHelpIconAlt";if(a.hasClass(e)){f.removeClass(l);a.removeClass(e);a.addClass("hidden");b.removeClass(k);b.find(d).safeAttr("alt",$$WP.Strings.get(c,j))}},100,n,c,a)}};$$WPUtil.handlePopupEndAnchor=function(a,e){var b="isblur",d,c,f,g,h;e=e||"Global";d=$afe.jq(a.target);if(!d.hasClass("popupiconcontainer"))$popupiconcontainer=d.parents(".popupiconcontainer").first();else $popupiconcontainer=d;if($popupiconcontainer.length===0)return;c=$popupiconcontainer.find(".popupInstructions");g=c.siblings(".popupinstructionsicon");f=c.parents("#main, #sidebar, .Popup");if(a.type==="keyup"&&a.key==="Tab"&&a.shiftKey===false){c.addClass(b);window.setTimeout(function(f,c,a){var d=c.find("img").data("altnode")||"PopupHelpIconAlt";if(a.hasClass(b)){f.removeClass("allowOverflow");a.removeClass(b);a.addClass("hidden");c.removeClass("showPopup");c.find("img").safeAttr("alt",$$WP.Strings.get(d,e))}},100,f,g,c);WP.DOM.Search.getNextFocusable(d.context).focus()}else a.type==="keyup"&&a.key==="Tab"&&a.shiftKey===true&&WP.DOM.Search.getPreviousFocusable($popupiconcontainer[0].parentNode).focus()};$$WPUtil.printHtmlClass=function(b){var a;a=$afe.select("."+b);$$WPUtil.printElement(a)};$$WPUtil.printImage=function(b){var a=dangerou$.parseHtml("<img src='"+b+"' style='height: 100%' />");$$WPUtil.printElement(a)};$$WPUtil.printElement=function(d){var c,a,b;a=openWindow("","Print","resizable");b=$afe.jq(d);c=b.get(0).outerHTML;a.focus();dangerou$.setHtml(a.document.body,c);window.setTimeout(function(a){a.print();a.close()},10,a)};$$WPUtil.postify=function(c){var b={},a=function(d,e){for(var c in d){var f=isFinite(c)?(e!=""?e:"")+"["+c+"]":(e!=""?e+".":"")+c;switch(typeof d[c]){case"number":case"string":case"boolean":b[f]=d[c];break;case"object":a(d[c],f!=""?f:c)}}};a(c,"");return b};$$WPUtil.postForm=function(f,c,g){var a=$afe.jq(document.createElement("form"));a.safeAttr("method","post");a.safeAttr("action",f);a.safeAttr("target",g);if(c)for(var d=0;d<c.length;d++){var e=c[d],b=$afe.jq(document.createElement("input"));b.safeAttr("type","hidden");b.safeAttr("name",e.Name);b.safeAttr("value",e.Value);a.safeAppend(b)}$afe.select("body").safeAppend(a);a.submit();$afe.select("body").remove(a)};$$WPUtil.generateRandomGUID=function generateRandomGUID(){var c="",a,b;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(b=0;b<16;b++)c+=a.charAt(Math.floor(Math.random()*a.length));return c};$$WPUtil.highlightNodeText=function(d,g){var b,e,a,c,f;if(d===null)return;b=d.childNodes;if(b===null||b.length===0)return;try{e=new RegExp("("+g+")","gi");for(c=0;c<b.length;c=c+1){a=b[c];if(a!==null)if(a.nodeType===3){if(e.test(a.nodeValue)){f=document.createElement("span");dangerou$.setHtml(f,HTMLEncode(a.nodeValue).replace(e,'<span class="hilite">$1</span>'));d.insertBefore(f,a);d.removeChild(a)}}else a.nodeType===1&&$$WPUtil.highlightNodeText(a,g)}}catch(h){}};$$WPUtil.createAriaLabel=function(c,d){var b=$afe.select("#"+c),a=$afe.select("#arialabels");if(b.length===0){if(a.length===0)a=$afe.jq(document.body).safeAppend($$WP.SimpleTemplates.Div({id:"arialabels"}));b=$$WP.SimpleTemplates.Span({"class":"clearlabel",id:c},d);a.safeAppend(b)}};$$WPUtil.addPopupListener=function(a,b){if(a===null||typeof a==="undefined")a=$afe.select("#main");document.addEventListener("keydown",function(a){$$WPUtil.handlePopupInstructionsKeydown(a,b)});a.find(".popupiconcontainer").each(function(){var a=$afe.jq(this);$$WPUtil.addSinglePopupListener(a,b)})};$$WPUtil.AddPopupListener=$$WPUtil.addPopupListener;$$WPUtil.addSinglePopupListener=function(a,b,d){var c="blur focus keydown";a.unbind().hover($$WPUtil.handlePopupInstructions);a.find(".popupinstructionsicon").unbind().on(c,function(a){$$WPUtil.handlePopupInstructions(a,b)});a.find(".popupInstructions").unbind().on(c,function(a){$$WPUtil.handlePopupInstructions(a,b)});d&&document.addEventListener("keydown",function(a){$$WPUtil.handlePopupInstructionsKeydown(a,b)})};$$WPUtil.removePopupListener=function(a){if(a===null||typeof a==="undefined")a=$afe.jq("#main");var b=a.find(".popupiconcontainer");b.unbind();b.find(".popupinstructionsicon").unbind();b.find(".popupInstructions").unbind()};$$WPUtil.isValidPhoneNumber=function(b){var a=new RegExp(/^\+?\d{6,17}$/);return a.test(b)};$$WPUtil.PrintAndAuditNET=function(){window.print();$.ajax({url:makeLink("Home/AuditPrint"),type:"POST",data:{title:document.title}})};$$WPUtil.clearAlertCache=function(){};$$WPUtil.showLogoutPopup=function(d){var b="Authentication.Logout",a="Home/Logout",c=new $$WPComp.MessageComponent({callback:function(){$$WP.Utilities.TryRedirect(makeLink(a))},TitleText:$$WP.Strings.get("PopupTitleText",b),Message:$$WP.Strings.get(d,b),ToolbarButtons:[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("OkayButton",b),null,"otherbutton","")],IsClosable:false});$$WPUtil.quickPopup(c);window.setTimeout(function(){$$WP.Utilities.TryRedirect(makeLink(a))},1e4)};$$WPUtil.regExEscapeString=function WP$Utilities$regExEscapeString(b){var c,a;if(typeof b!=="string")return"";c="";for(a=0;a<b.length;a++)c+="\\u"+("0000"+b.charCodeAt(a).toString(16)).substr(-4);return c};$$WPUtil.IsSupportedChars=function WP$Utilities$IsSupportedChars(a){var b=new RegExp(/^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0192\u02C6\u02DC\u2013\u2014\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2026\u2030\u2039\u203A\u20AC\u2122]*$/);return b.test(a)};$$WPUtil.RemoveUnsupportedChars=function WP$Utilities$RemoveUnsupportedChars(a){return a.split("").filter($$WPUtil.IsSupportedChars).join("")};$$WPUtil.IsH2GActivity=function WP$Utilities$IsH2GActivity(b){var a=true;return $$WPUtil.IsVisitsListUrl(b)?a:$$WPUtil.IsTestResultsUrl(b)?a:$$WPUtil.IsMedsListUrl(b)?a:$$WPUtil.IsAllergiesListUrl(b)?a:$$WPUtil.IsHealthIssuesUrl(b)?a:false};$$WPUtil.IsVisitsListUrl=function WP$Utilities$IsVisitsListUrl(a){a=a.toLowerCase();return a.indexOf("visits/visitslist")!==-1||a.indexOf("mode=appointments")!==-1||a.indexOf("mode=visits")!==-1||a.indexOf("mode=recentappts")!==-1?true:false};$$WPUtil.IsTestResultsUrl=function WP$Utilities$IsTestResultsUrl(a){a=a.toLowerCase();return a.indexOf("clinical/testresults")!==-1||a.indexOf("mode=labs")!==-1?true:false};$$WPUtil.IsMedsListUrl=function WP$Utilities$IsMedsListUrl(a){a=a.toLowerCase();return a.indexOf("clinical/medications/list")!==-1||a.indexOf("mode=medslist")!==-1?true:false};$$WPUtil.IsAllergiesListUrl=function WP$Utilities$IsAllergiesListUrl(a){a=a.toLowerCase();return a.indexOf("clinical/allergies")!==-1||a.indexOf("mode=allergies")!==-1?true:false};$$WPUtil.IsHealthIssuesUrl=function WP$Utilities$IsHealthIssuesUrl(a){a=a.toLowerCase();return a.indexOf("clinical/healthissues")!==-1||a.indexOf("mode=hlthissues")!==-1?true:false};$$WPUtil.IsHealthSummaryUrl=function WP$Utilities$IsHealthSummaryUrl(a){a=a.toLowerCase();return a.indexOf("mode=snapshot")!==-1?true:false};$$WPUtil.defaultAjaxErrorHandler=function WP$Utilities$defaultAjaxErrorHandler(i,b,c){var d="#content",g,f,j,a,e;if($$WP.IsEpicAjaxErrorHandlerDisabled===true)return;if(c.suppressEpicDefaultAjaxErrorHandler||c.error!==undefined||b.status===200){$$WP.Debug.IsEnabled&&$$WP.Debug.logError("Ajax call to "+c.url+" received an error response and has the default error handler suppressed.",true);return}if(b.statusText==="abort"||b.statusText==="canceled"||userAborted(b)){$$WP.Debug.log(b.statusText+" ajax call to "+c.url+".",true);return}if(c.error===undefined){WP.Events.cancelBeforeUnload();if(!$$WP.Debug.IsEnabled){$afe.select(d).children().addClass("hidden");if($$WP.Utilities.UI.IsMobile){window.location.href=makeLink("500.aspx");return}}if($afe.select(".AjaxErrorHandler.Popup").length!==0)return;e=$$WPContain.Popup.SizeEnum.SMALL;if($$WP.Debug.IsEnabled&&b.responseText!==undefined){a=b.responseText;a=a.substring(a.indexOf("<body"),a.indexOf("</body"));f=a.substring(a.indexOf(">")+1,a.length);e=$$WPContain.Popup.SizeEnum.LARGE}else f=$$WP.Strings.get("DefaultAjaxErrorHandlerMessage","global");g=new $$WPComp.MessageComponent({TitleText:$$WP.Strings.get("DefaultAjaxErrorHandlerTitle","global"),Message:f,ToolbarButtons:[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("ClosePopupButton","Core.Utilities"),null,"cancelworkflow")]});$$WPUtil.quickPopup(g,{Size:e,positioningFunction:$$WPContain.Positions.InsideNearTop,HasBackButton:false,Class:"AjaxErrorHandler"});$afe.select(d).removeAttr("id");$afe.select(".messageComponent").find(d).removeAttr("id")}function userAborted(a){return a.status===0&&!a.getAllResponseHeaders()}};$$WPUtil.isLocalStorageAvailable=function WP$Utilities$isLocalStorageAvailable(){var a="test";try{window.localStorage.setItem(a,a);window.localStorage.removeItem(a)}catch(b){return false}return true};$$WPUtil.CalculateAndSetBodyHeight=function WP$Utilities$CalculateAndSetBodyHeight(d){var e=$afe.select("body"),b=$afe.select("#wrap"),c=$afe.select("#footer"),a;c.css("margin-top",-1*c.outerHeight()+"px");$afe.jq(window).trigger("matchColumnHeights");a=(e.height()-b.height())/2;a=Math.max(a,0);if(d)b.animate({top:a});else b.css("top",a)};$$WPUtil.UseHTML5InputControls=function $$WPUtil$UseHTML5InputControls(){var a="input";$$WP.Utilities.isBrowserCapableOf(a,{type:"number"})&&$afe.select("input[data-inputtype='number']").each(function(){this.type="number"});$$WP.Utilities.isBrowserCapableOf(a,{type:"phone"})&&$afe.select("input[data-inputtype='phone']").each(function(){this.type="phone"});$$WP.Utilities.isBrowserCapableOf(a,{type:"email"})&&$afe.select("input[data-inputtype='email']").each(function(){this.type="email"});$$WP.Utilities.isBrowserCapableOf(a,{type:"date"})&&$afe.select("input[data-inputtype='date']").each(function(){this.type="date"});$$WP.Utilities.isBrowserCapableOf(a,{type:"time"})&&$afe.select("input[data-inputtype='time']").each(function(){this.type="time"})};$$WPUtil.FixScrollingForIOS=function $$WPUtil$FixScrollingForIOS(a){a.on("blur","input, textarea",function(){window.scrollBy(0,0)})};$$WPUtil.ShowAjaxSpinner=function $$WPUtil$ShowAjaxSpinner(a,b){if(a===null)return;b!==true&&a.removeClass("hidden");if(!a.hasClass("hidden")){var c=a.contents();a.empty();a.safeAppend(c)}b!==true&&setTimeout(function(a){$$WPUtil.ShowAjaxSpinner(a,true)},1500,a)};$$WPUtil.HideAjaxSpinner=function $$WPUtil$HideAjaxSpinner(a){a.addClass("hidden")};$$WPUtil.GetRawString=function(a){return a&&!$$WPUtil.IsNullOrEmpty(a.string)?a.string:typeof a==="string"?a:""};$$WPUtil.GetQueryStringParameterValue=function $$WPUtil$GetQueryStringParameterValue(c,b){var a;a=new RegExp("[?&]"+b+"=([^&#]*)").exec(c);return a===null?"":decodeURIComponent(a[1])}
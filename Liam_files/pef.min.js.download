/*! Copyright (c) Epic Systems Corporation 2005-2016 */
var TotalReadingsAllowed=3;function disableAddButton(){var a=document.getElementById("addanotherreading");a.disabled=true;applyClass(a,"disabled")}function enableAddButton(){var a=document.getElementById("addanotherreading");a.disabled=false;removeClassNames(a,"disabled")}function showReading(){var c="hidden",d="reading",a,b,e=document.getElementById("totalColumn");a=parseInt(e.value,10)+1;b=document.getElementById(d+a);if(a>TotalReadingsAllowed||!b||b===null){disableAddButton();return}removeClassNames(b,c);applyClass(b,"last");e.value=a;applyClass(document.getElementById("now"),c);if(a===2){removeClassNames(document.getElementById("delbtn1"),c);removeClassNames(document.getElementById("delprompt"),c)}a>1&&removeClassNames(document.getElementById(d+(a-1)),"last");b=document.getElementById(d+(a+1));(a===TotalReadingsAllowed||!b||b===null)&&disableAddButton();document.getElementById("date_"+a).focus();$afe.jq(window).trigger("matchColumnHeights")}function deleteReading(b,i){var d="hidden",c=null,a,e;document.getElementById("date_"+b).value="";var g=document.getElementById("hour_"+b);if(g!==c)g.value="";var f=document.getElementById("minute_"+b);if(f!==c)f.value="";var h=document.getElementById("time_"+b);if(h!==c)h.value="";a=document.getElementById("AM_"+b);if(a&&a!==c)a.checked=false;a=document.getElementById("PM_"+b);if(a&&a!==c)a.checked=false;for(e=1;e<=i;e++){a=document.getElementById("cell_"+e+"_"+b);if(a&&a!==c){a.value="";$afe.jq(a).focus()}}if(b===2){applyClass(document.getElementById("delbtn1"),d);applyClass(document.getElementById("delprompt"),d);removeClassNames(document.getElementById("now"),d)}a=document.getElementById("reading"+b);applyClass(a,d);removeClassNames(a,"last");b--;applyClass(document.getElementById("reading"+b),"last");enableAddButton();document.getElementById("totalColumn").value=b}function copyReading(b,e){var a,d,c=b+1;document.getElementById("date_"+b).value=document.getElementById("date_"+c).value;document.getElementById("hour_"+b).value=document.getElementById("hour_"+c).value;document.getElementById("minute_"+b).value=document.getElementById("minute_"+c).value;a=document.getElementById("AM_"+b);if(a&&a!==null)a.checked=document.getElementById("AM_"+c).checked;a=document.getElementById("PM_"+b);if(a&&a!==null)a.checked=document.getElementById("PM_"+c).checked;for(d=1;d<=e;d++){a=document.getElementById("cell_"+d+"_"+b);if(a&&a!==null){var f=document.getElementById("cell_"+d+"_"+c);a.value=f.value;$afe.jq(a).focus()}}}function hideReading(a,c){var b=parseInt(document.getElementById("totalColumn").value,10);if(a===b)deleteReading(b,c);else{for(a;a<b;a++)copyReading(a,c);deleteReading(b,c)}$afe.jq(window).trigger("matchColumnHeights")}function getCurDateTime(f,g,e,c,d,h){var a=null,b=new Date;if(f!==a&&document.getElementById(f)!==a){var i=document.getElementById(f);i.value=formatDate(b);$afe.jq(i).focus()}if(g!==a&&e!==a&&document.getElementById(g)!==a&&document.getElementById(e)!==a){if(c!==a&&d!==a&&document.getElementById(c)!==a&&document.getElementById(d)!==a)if(b.getHours()>=12){document.getElementById(c).checked=false;document.getElementById(d).checked=true}else{document.getElementById(c).checked=true;document.getElementById(d).checked=false}document.getElementById(g).value=formatHour(b);document.getElementById(e).value=formatMinute(b)}else if(h!==a&&document.getElementById(h)!==a){var j=document.getElementById(h);j.value=formatTime(b);$afe.jq(j).focus()}$afe.jq(document.getElementById("now")).focus()}function addDateValidation(){var a=new Date,c=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),d=new Date(Date.UTC(1841,0,1)),b=new $$WP.FormValidation.ValidationSettings({isDate:true,required:this.IsRequired,maxLength:"15",minDate:d,maxDate:c});for(i=1;i<=TotalReadingsAllowed;i++)$afe.select("#date_".concat(i)).safeAttr("data-validation-settings",b.toJSON())}function tab(b,a){return function(c){if(c.keyCode===9){if(c.shiftKey){if(!a||a===null)return;a.focus()}else{if(b===null)return;b.focus()}WP.Events.cancelEvent(c);WP.Events.preventDefault(c);return false}}}function tabBackToAMPM(a,b){return function(c){if(c.keyCode===9){if(!c.shiftKey)return;if(!a||a===null)return;if(a.checked)a.focus();else b.focus();WP.Events.cancelEvent(c);WP.Events.preventDefault(c);return false}}}function filterRows(){var a=$afe.jq(this);return a.hasClass("prompt")||a.hasClass("reading")}function fixTable(t){var g="keydown",a=null,j=".reading",n=$afe.select("#pefprompts").children().filter(filterRows),p=$afe.select("fieldset.reading"),k,q,s;q=function(){var a=$afe.jq(this);i=Math.max(i,a.children(j).eq(c).height())};s=function(){var a=$afe.jq(this);a.children(j).eq(c).height(i)};for(c=0;c<n.length;c++){k=n.eq(c);k.hasClass("grouper")&&k.outerWidth($afe.select("#PEF-Table").width());i=k.height();p.each(q);n.eq(c).height(i);p.each(s)}matchWrapHeight();var c,i,d,b,f,e,h,o,m,l;f=a;e=a;m=false;o=document.getElementById("INP_AMPM_1_PM");l=document.getElementById("INP_AMPM_1_AM");d=o;if(d===a){var r=document.getElementById("minute_1");if(r!==a)d=r;else d=document.getElementById("time_1")}for(c=1;c<=t;c++){h=document.getElementById("cell_"+c+"_1");b=document.getElementById("popupparentdiv"+c);if(b!==a){b=b.firstChild;if(b!==a&&e===a){e=b;m=true}}if(h===a&&b===a)continue;if(e===a)e=h;d!==a&&(b!==a||f!==a)&&WP.Events.addListener(d,g,tab(b,f));b!==a&&WP.Events.addListener(b,g,tab(h,d));f=b;d=h}d!==a&&f!==a&&WP.Events.addListener(d,g,tab(a,f));if(l!==a&&m){WP.Events.addListener(l,g,tab(e,a));WP.Events.addListener(e,g,tabBackToAMPM(l,o))}}function doneLoading(b,a){if(!b.complete){window.setTimeout(function(){doneLoading(b,a)},10);return}window.setTimeout(function(){fixTable(a)},200)}function preLoadAndFixTable(b){var a;a=new Image;a.src=makeStaticLink("images/info.png");window.setTimeout(function(){doneLoading(a,b)},5);parseInt(document.getElementById("totalColumn").value,10)>=TotalReadingsAllowed&&disableAddButton();addDateValidation()}
(function WP$UI$LocaleSwitcherController$definition(){var n="aria-modal",m="scrollDisabled",i="margin-top",h="false",a="aria-hidden",l="localeShow",k="jqHidden",j="localeHide",d=false,b="true",c="aria-expanded",e=true,g=null,f="click",o=function WP$UI$LocaleSwitcherController(b){var a=this;a.WP$Controllers$Controller();a.proxify("_localeButtonKeyDown","_localeButtonClick","_openLocaleDropdown","_closeLocaleDropdown","_setFocusToMenuButton");a.proxify("_setFocusToFirstLink","_setFocusToLastLink","_setFocusToNextLink","_setFocusToPreviousLink","__setAriaHiddenForPage","_localeLinkKeyDown");a.$root=b;a.$menuButton=a.$root.find("#localeswitch");a.$links=a.$root.find(".morelocalesitemlink");a.$firstLink=a.$links.first();a.$lastLink=a.$links.last();a.$localesList=a.$root.find("#morelocales");a.numLinks=a.$links.length;a.currentIndex=0;a.keyCode={TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};a.$root.on("blur",a._closeLocaleDropdown);a.$menuButton.on("keydown",a._localeButtonKeyDown);a.$menuButton.on(f,a._localeButtonClick);a.$links.on("keydown",a._localeLinkKeyDown)},p={$root:g,$menuButton:g,$links:g,$firstLink:g,$lastLink:g,$localesList:g,currentIndex:0,_localeButtonKeyDown:function WP$UI$LocaleSwitcherController$_localeButtonKeyDown(f){var a=this,g=e;switch(f.keyCode){case a.keyCode.SPACE:case a.keyCode.RETURN:a._openLocaleDropdown();a._setFocusToFirstLink();break;case a.keyCode.DOWN:a.$root.safeAttr(c,b)&&a._setFocusToFirstLink();case a.keyCode.UP:a.$root.safeAttr(c,b)&&a._setFocusToLastLink();default:g=d}if(g){f.stopPropagation();f.preventDefault()}},_localeButtonClick:function WP$UI$LocaleSwitcherController$_localeButtonClick(a){var e=this;if(e.$root.safeAttr(c)===b)e._closeLocaleDropdown(d);else{e._openLocaleDropdown();a.screenX==0&&a.screenY==0&&e._setFocusToFirstLink()}a.stopPropagation();a.preventDefault()},_openLocaleDropdown:function WP$UI$LocaleSwitcherController$_openProxyDropdown(){var d=this;d.$localesList.removeClass(j).removeClass(k).addClass(l).safeAttr(a,h);d.$root.safeAttr(c,b);d.__setAriaHiddenForPage(e);var g=$afe.select("body");g.css(i,-$$WPUtil.getScrollTop());g.addClass(m);g.on(f,d._closeLocaleDropdown);d.$localesList.scrollTop=0;d.$localesList.safeAttr(n,b)},_closeLocaleDropdown:function WP$UI$LocaleSwitcherController$_closeLocaleDropdown(){var e=this;e.$root.safeAttr(c,h);e.$localesList.removeClass(l).addClass(j).addClass(k).safeAttr(a,b);e.__setAriaHiddenForPage(d);e._setFocusToMenuButton();var g=$afe.select("body"),o=-parseInt(g.css(i));g.removeClass(m);e.$localesList.safeAttr(n,h);g.css(i,"");$$WPUtil.setScrollTop(o);g.off(f,e._closeLocaleDropdown)},_setFocusToMenuButton:function WP$UI$LocaleSwitcherController$_setFocusToMenuButton(){this.$menuButton.focus()},_setFocusToFirstLink:function WP$UI$LocaleSwitcherController$_setFocusToFirstLink(){this.$firstLink.focus();this.currentIndex=0},_setFocusToLastLink:function WP$UI$LocaleSwitcherController$_setFocusToLastLink(){this.$lastLink.focus();this.currentIndex=this.numLinks-1},_setFocusToPreviousLink:function WP$UI$LocaleSwitcherController$_setFocusToPreviousLink(){var a=this;if(a.currentIndex<=0)a._setFocusToLastLink();else a.$links.eq(--a.currentIndex).focus()},_setFocusToNextLink:function WP$UI$LocaleSwitcherController$_setFocusToNextLink(){var a=this;if(a.currentIndex>=a.$links.length-1)a._setFocusToFirstLink();else a.$links.eq(++a.currentIndex).focus()},_localeLinkKeyDown:function(b){var a=this,c=d;if(b.ctrlKey||b.altKey||b.metaKey)return;if(b.shiftKey){if(b.keyCode===a.keyCode.TAB){c=e;a._setFocusToPreviousLink(a)}}else{c=e;switch(b.keyCode){case a.keyCode.ESC:a._closeLocaleDropdown();break;case a.keyCode.SPACE:a.currentLink.click();break;case a.keyCode.UP:a._setFocusToPreviousLink();break;case a.keyCode.DOWN:case a.keyCode.TAB:a._setFocusToNextLink();break;case a.keyCode.HOME:case a.keyCode.PAGEUP:a._setFocusToFirstLink();break;case a.keyCode.END:case a.keyCode.PAGEDOWN:a._setFocusToLastLink();break;default:c=d}}if(c){b.stopPropagation();b.preventDefault()}},__setAriaHiddenForPage:function WP$UI$LocaleSwitcherController$__setAriaHiddenForPage(b){$afe.select("#footer").safeAttr(a,b);if($$WP.Utilities.UI.IsLoggedIn){$afe.select("#content").safeAttr(a,b);$afe.select("#toastWrapper").safeAttr(a,b);$afe.select("#logout_container").safeAttr(a,b);$afe.select("#header_extras_proxy").safeAttr(a,b)}else{$afe.select("#main").safeAttr(a,b);this.$root.siblings().safeAttr(a,b)}}};o.prototype=p;$$WP.UI=$$WP.UI||{};$$WP.UI.LocaleSwitcherController=o;o.extend($$WP.Controllers.Controller,"WP$UI$LocaleSwitcherController")})()
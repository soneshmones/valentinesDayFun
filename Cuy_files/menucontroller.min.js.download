(function ClassDefinition(){var s=".submenu",n=".menuitem-content:visible",g="-ariasearchresultstotal",m="menu-shieldopen",l="aria-expanded",k="menu-rootopen",j="menu",f="menu-open",r="-searchbar",q="-searchresultstotal",p="-searchlist",i="-list",h="-searchemptybutton",e=".menuitem-content",b="keydown",o="-responsiveclosebutton",d="click",a="#",c=null,v=$$WP.Controllers.Controller,u=769,t=function WP$Navigation$MenuController(d,b,e,c){var a=this;a.$root=d;a.callbackFunction=b;a.template=$$WP.Templates.Navigation.Menu;a.searchTemplate=$$WP.Templates.Navigation.MenuSearch;a.proxify("_onMenuLoaded","_toggleMenu","_onMenuButtonKeydown","_doSearch","__afterHideMenuShield","__setFocusOnMenuOpen","_onSearchEmptyButtonClicked");a.MenuName=c;$.get({url:makeLink(e),success:a._onMenuLoaded})},w={$root:c,$menuRoot:c,$searchRoot:c,$searchResultsRoot:c,$searchEmptyButton:c,$menuShield:c,$menuSearchBar:c,$menuContainer:c,$menuButton:c,ariaSearchResultsTimer:c,menu:c,template:c,searchTemplate:c,callbackFunction:c,eventListenerFunctionProxy:c,_onMenuLoaded:function WP$Navigation$MenuController$_onMenuLoaded(f){var a=this;a.menu=new $$WP.Navigation.Models.Menu(f);a.menu.MenuName=a.MenuName;a._render();if(typeof a.callbackFunction==="function"){var d={};d.ButtonDisplayName=a.menu.MenuDisplayName;var e=[];if(a.menu.Shortcuts&&a.menu.Shortcuts.length>0)for(var c=0;c<a.menu.Shortcuts.length;c++){var b=a.menu.Shortcuts[c];e.push({Id:b.Id,Name:b.Name,URL:b.Link,Icon:b.Icon,DataAttributes:b.DataAttributes})}d.Shortcuts=e;a.callbackFunction(d)}},_render:function WP$Navigation$MenuController$_render(){var c=this;$afe.select(a+c.MenuName+"Wrapper").safeAppend($afe.renderTemplate(c.template,c.menu,{}));$afe.select(a+c.MenuName+"-closebutton").on(d,c._toggleMenu);$afe.select(a+c.MenuName+o).on(d,c._toggleMenu);c.$root.on(d,c._toggleMenu);c.$root.on(b,c._onMenuButtonKeydown);$afe.select("."+c.MenuName+e).on(d,c._toggleMenu);c.$searchEmptyButton=$afe.select(a+c.MenuName+h);c.$searchEmptyButton.on(d,c._onSearchEmptyButtonClicked);c.$menuRoot=$afe.select(a+c.MenuName+i);c.$searchRoot=$afe.select(a+c.MenuName+p);c.$searchResultsRoot=$afe.select(a+c.MenuName+q);c.$menuShield=$afe.select(a+c.MenuName+"-shield");c.$menuShield.on(d,c._toggleMenu);c.$menuSearchBar=$afe.select(a+c.MenuName+r);c.$menuSearchBar.on("input",c._doSearch);c.$menuContainer=$afe.select(a+c.MenuName+"-container");c.$menuButton=$afe.select(a+c.MenuName)},_onMenuButtonKeydown:function WP$Navigation$MenuController$_onMenuButtonKeydown(a){switch(a.keyCode){case 32:event.preventDefault();this._toggleMenu();break;case 13:event.preventDefault();this._toggleMenu()}},_toggleMenu:function WP$Navigation$MenuController$_toggleMenu(){if(this.$menuContainer.hasClass(f))this._closeMenu();else this._openMenu()},_openMenu:function WP$Navigation$MenuController$_openMenu(){var a=this;a.eventListenerFunctionProxy=$.proxy(a._handleMenuKeydown,a);a._preOpenMenu();if(a.MenuName===j){$$WP.Utilities.UI.ToggleBodyScrolling(true);a.__setAriaHiddenForPage(true)}a.$menuContainer.show().addClass(f);a.$menuButton.addClass(k);a.$menuButton.safeAttr(l,"true");a.$menuShield.show().addClass(m);a.$menuContainer.on(b,a.eventListenerFunctionProxy);a.$menuButton.on(b,a.eventListenerFunctionProxy);setTimeout(a.__setFocusOnMenuOpen,0)},__setFocusOnMenuOpen:function(){var c=this,b=$afe.select(a+c.MenuName+"-responsiveclosebutton:visible");if(b.length===0)if(window.outerWidth<u&&c.MenuName!=j)b=c.$menuButton;else b=c.$menuSearchBar;b.focus()},_closeMenu:function WP$Navigation$MenuController$_closeMenu(){var a=this;clearTimeout(a.ariaSearchResultsTimer);a.$menuContainer.removeClass(f).off(b,a.eventListenerFunctionProxy);a.$menuShield.removeClass(m);a.$menuButton.removeClass(k).off(b,a.eventListenerFunctionProxy).safeAttr(l,"false");$$WP.Utilities.UI.ToggleBodyScrolling(false);setTimeout(a.__afterHideMenuShield,100)},_preOpenMenu:function(){var d=".menu-rootopen",e=$afe.select(d)[0];if(e!==undefined){var c=a+e.id;clearTimeout(this.ariaSearchResultsTimer);$afe.select(".menu-button").off(b,this.eventListenerFunctionProxy);$afe.select(".menu-container").off(b,this.eventListenerFunctionProxy);$afe.select(".menu-open").hide().removeClass(f);$afe.select(".menu-shieldopen").hide().removeClass(m);$afe.select(d).removeClass(k).safeAttr(l,"false");$afe.select(c+i).scrollTop(0);$afe.select(c+r).val("");$afe.select(c+q).empty();$afe.select(c+g).empty();$afe.select(c+h).hide();$afe.select(c+p).hide();$afe.select(c+i).show()}},__afterHideMenuShield:function(){var a=this,b=$afe.select("body");if($afe.select(".lightbox_overlay:visible").length===0){a.MenuName===j&&a.__setAriaHiddenForPage(false);a.$root.focus()}a.$menuRoot.scrollTop(0);a.$menuSearchBar.val("");a._clearSearch();a.$menuContainer.hide();a.$menuShield.hide()},_handleMenuKeydown:function WP$Navigation$MenuController$_handleMenuKeydown(a){var b="menu-searchbar",c=this;switch(a.keyCode){case 8:a.target.tagName!=="INPUT"&&a.preventDefault();break;case 9:c.__handleMenuTab(a);break;case 27:c._closeMenu();break;case 38:a.preventDefault();c.__handleMenuUpArrow(a.target);break;case 40:a.preventDefault();c.__handleMenuDownArrow(a.target);break;case 36:a.target.id!==b&&$afe.select(n).first().focus();break;case 35:a.target.id!==b&&$afe.select(n).last().focus()}},__handleMenuTab:function(e){var c=a+this.MenuName+"-container ",d=$afe.select(c+"button:not([disabled]), "+c+"input:not([disabled],[type='hidden']), "+c+"a[href]:visible, "+c+"div[tabindex=0]:visible"),b=d[0],f=d[d.length-1];if($afe.jq(b).css("display")==="none"){b=b=$afe.select(a+this.MenuName+o)[0];if(b==="undefined"||$afe.jq(b).css("display")==="none")b=this.$menuButton[0]}if(e.shiftKey){if(document.activeElement===b){f.focus();e.preventDefault()}}else if(document.activeElement===f){b.focus();e.preventDefault()}},__handleMenuDownArrow:function(c){var a=$afe.jq(c);if(!a.hasClass("menuitem-content")){$afe.select(n).first().focus();return}var b=a.parent().next().find(e);if(b.length!==0){b.focus();return}a.closest(s).next().find(e).first().focus()},__handleMenuUpArrow:function(c){var b=$afe.jq(c),a=b.parent().prev().find(e);if(a.length!==0){a.focus();return}a=b.closest(s).prev().find(e).last();if(a.length!==0){a.focus();return}this.$menuSearchBar.focus()},__setAriaHiddenForPage:function(b){var a="aria-hidden";$afe.select("#header").safeAttr(a,b);$afe.select("#footer").safeAttr(a,b);$afe.select("#content").safeAttr(a,b)},_onSearchEmptyButtonClicked:function $WP$Navigation$MenuController$_onEmptySearchButtonClicked(){this.$menuSearchBar.val("").focus();this._clearSearch()},_doSearch:function $WP$Navigation$MenuController$_doSearch(j){var f=this;$afe.select(a+f.MenuName+g).empty();clearTimeout(f.ariaSearchResultsTimer);var h=j.target.value;h=h.toLowerCase().trim();if(h===c||h===""){f._clearSearch();return}f.$menuRoot.hide();f.$searchRoot.empty();f.$searchResultsRoot.empty();var i=new $$WP.Navigation.Models.SearchMenu(f.menu,h);f.__writeNumSearchMatches(i.TotalMatches);f.$searchRoot.safeAppend($afe.renderTemplate(f.searchTemplate,i,{}));f.$searchEmptyButton.show();f.$searchRoot.show();f.$menuContainer.off(b,f.eventListenerFunctionProxy);f.eventListenerFunctionProxy=$.proxy(f._handleMenuKeydown,f);f.$menuContainer.on(b,f.eventListenerFunctionProxy);$afe.select("."+f.MenuName+e).on(d,f._toggleMenu)},_clearSearch:function WP$Navigation$MenuController$_clearSearch(){var c=this;$afe.select(a+c.MenuName+g).empty();clearTimeout(c.ariaSearchResultsTimer);c.$menuContainer.off(b,c.eventListenerFunctionProxy);c.$searchRoot.hide();c.$searchResultsRoot.empty();c.$menuRoot.show();var d=$afe.select(a+c.MenuName+h);setTimeout(function(){d.hide()},50);c.eventListenerFunctionProxy=$.proxy(c._handleMenuKeydown,c);c.$menuContainer.on(b,c.eventListenerFunctionProxy)},__writeNumSearchMatches:function(f){var d="@MYCHART@NUMSEARCHMATCHES@",b="Navigation.Menu",e=this,c="";switch(f){case 0:c=$$WP.Strings.get("MenuSearchNoResults",b);break;case 1:c=$$WP.Strings.get("MenuSearchOneResult",b);break;default:$$WP.Strings.addMnemonic(d,f,false,b);c=$$WP.Strings.get("MenuSearchMultipleResults",b);$$WP.Strings.removeMnemonic(d,b)}var h=$afe.select(a+e.MenuName+g);e.ariaSearchResultsTimer=setTimeout(function(){h.text(c)},500);e.$searchResultsRoot.empty();e.$searchResultsRoot.text(c)}};t.prototype=w;$$WP.Navigation=$$WP.Navigation||{};$$WP.Navigation.MenuController=t;t.extend(v,"WP$Navigation$MenuController")})()
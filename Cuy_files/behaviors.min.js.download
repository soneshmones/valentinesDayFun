/*! Copyright (c) Epic Systems Corporation 2014 - 2016 */
$$WPUtil.guaranteeExistence($$WP,"Behaviors");var $$WPBehav=$$WP.Behaviors;$$WPBehav.AnimateHeights={add:function WPBehav$AnimateHeights$add(b){var i="px",h="resize",d="height",k=this,g,l,m,f,j,c,e,a;j=b.$container.get(0);g=WP.DOM.Read.getStyle(j,d);l=WP.DOM.Read.getStyle(j,"max-height");m=WP.DOM.Read.getStyle(j,"min-height");b.$container.on(WP.Events.TRANSITION_END_STR,null,function(a){if(a&&a.target&&!$afe.jq(a.target).hasClass("component"))return;$afe.jq(this).removeClass("capped");$afe.jq(window).trigger("componentRendered");$afe.select("#footer").removeClass("moving")});a=b.$container.closest(".filledContainer");if(!a.length)a=null;f=g.indexOf("%")>-1?parseFloat(g,10):$$WPUtil.cssValueToPixels(g);if(!isNaN(f)){if(g.indexOf("%")>-1){if(!a)throw"Components with a percentage based height must be a child (or child of a child) of an element with the filledContainer class.  The percentage of the height will be a percentage of this filled container's height.";a.bind(h,{percentage:f/100,of:a,component:b},k._recalculatePercentageBasedHeight);b.__$heightHolder=a;return}b.$container.css(d,f+i);b.addEventListener(h,k._maintainFixedHeight);a&&a.css(d,Math.max(a.contentHeight(),f)+i);return}e=$$WPUtil.cssValueToPixels(m);b.$container.css(d,e+i);a&&a.css(d,Math.max(a.contentHeight(),e)+i);c=$$WPUtil.cssValueToPixels(l);if(isNaN(c))c=99999;else c!==99999&&b.$content.css("overflow","hidden");if(e===c){b.addEventListener(h,k._maintainFixedHeight);return}b._animationData={$heightHolder:a,minHeight:e,maxHeight:c,component:b};b.addEventListener(h,k._adjustHeightToFitContent)},remove:function(a){var b="resize";a.removeEventListener(b,this._adjustHeightToFitContent);a.removeEventListener(b,this._maintainFixedHeight);a.__$heightHolder&&a.__$heightHolder.unbind(b,this._recalculatePercentageBasedHeight)},_maintainFixedHeight:function WPBehav$AnimateHeights$_maintainFixedHeight(c){var a,b;a=$afe.jq(c.currentTarget);b=$$WPUtil.cssValueToPixels(a.css("height"));$$WPComp.getInstance(a.safeAttr("data-component-id")).capHeight(b)},_adjustHeightToFitContent:function WPBehav$AnimateHeights$_adjustHeightToFitContent(e,c){var a=this,b,d=false;if(c)if(!isNaN(c.delta)){b=!isNaN(a.__containerTargetHeight)?a.__containerTargetHeight:$$WPUtil.cssValueToPixels(a.$container.css("height"));b+=c.delta;if(b<0)b=0;a.__containerTargetHeight=b;a.$container.css("height",b+"px");if(c.allowGrowth===true)b=""}else d=c.forceShrink===true;$$WPBehav.AnimateHeights._setAppropriateHeight(a.$container,a._animationData.minHeight,a._animationData.maxHeight,a._animationData.$heightHolder,b,d);return false},_recalculatePercentageBasedHeight:function WPBehav$AnimateHeights$_recalculatePercentageBasedHeight(b){var a;a=$$WPUtil.cssValueToPixels(b.data.of.inlineStyle("height"))*b.data.percentage;if(isNaN(a))a=(b.data.of.contentHeight()-$afe.jq(this).heightMargin())*b.data.percentage;$$WPBehav.AnimateHeights._setAppropriateHeight(b.data.component.$container,a,a,null,a)},_setAppropriateHeight:function WPBehav$AnimateHeights$_setAppropriateHeight(a,j,f,d,g,h){var b="height",m="isanimating",n,e,i,o,k,l,c;n=a.get(0).style.height;i=false;o=d&&d.length;j=j||0;f=f||99999;c=$$WPComp.getInstance(a.safeAttr("data-component-id"));a.addClass(m);if($$WPUtil.isNaN(g)||g<0){k=a.children(".content");if($$WPComp.isComponent(c)&&!isNaN(c.__containerTargetHeight))l=c.__containerTargetHeight;else l=$$WPUtil.cssValueToPixels(k.css(b));k.css(b,"auto");h&&a.css(b,"auto");g=a.contentHeight();h&&a.css(b,n);if(o)g=Math.max(g,$$WPUtil.cssValueToPixels(d.inlineStyle(b)))}a.removeClass(m);e=Math.min(Math.max(j,g),f);i=c.__containerTargetHeight!==e;c.__containerTargetHeight=e;e+="px";if(i){if(!h){a.addClass("capped");$afe.select("#footer").addClass("moving");setTimeout(function(){$afe.select("#footer").removeClass("moving")},500)}a.css(b,e);if(a.hasClass("component")&&!isNaN(f)){c.capHeight(f);if(d&&d.inlineStyle(b)!==e){d.css(b,e);d.find(".component").trigger("resize")}}}else f!==99999&&c.capHeight(f)}};$$WP.Behaviors.matchRowHeights=function(g,e){var a="",d=0,h=0,c,f,b=0;g.find(e).each(function(){var i=$afe.jq(this);if(i.length!==0){c=i.outerHeight();f=i.offset().top;i.css("min-height",c);if(h!==f){d=d+1;d>1&&g.find(e+"."+a).css("height",b);a="row"+d;h=f;b=c}else if(b<c)b=c;i.addClass(a)}a!==""&&g.find(e+"."+a).css("height",b)})}